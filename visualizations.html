<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Visualizations</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto+Slab:wght@100..900&display=swap" rel="stylesheet"/>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="index.css" />
    <style>
      .page-index{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid #e5e7eb}
      .page-index .container{max-width:1100px;margin:0 auto;padding:10px 16px;display:flex;gap:12px;flex-wrap:wrap}
      .page-index a{font-family:"Fira Sans",system-ui,sans-serif;text-decoration:none;color:#1f2937;padding:8px 12px;border-radius:10px;border:1px solid #e5e7eb}
      .page-index a:hover{background:#f3f4f6}
      .page-index a.active-link{background:#1D4ED8!important;color:#ffffff!important;border-color:#1D4ED8!important}
      details.section{max-width:1100px;margin:18px auto;padding:0 16px;border-radius:14px;border:1px solid #e5e7eb;background:#fff}
      details.section[open]{box-shadow:0 2px 10px rgba(0,0,0,.04)}
      details.section summary{list-style:none;cursor:pointer;padding:18px}
      details.section summary::-webkit-details-marker{display:none}
      details.section h2{margin:0;font-family:"Roboto Slab",serif}
      .section-subtitle{margin:6px 0 0 0;color:#4b5563;font-weight:600}
      .section-body{padding:0 18px 18px 18px}
      .chart-section{margin:18px 0}
      .chart-section h3{font-family:"Roboto Slab",serif;margin-bottom:6px}
      .chart-section p{margin:0 0 10px 0;color:#374151}
      .chart-container{border:1px solid #e5e7eb;border-radius:10px;background:#fafafa}
      #choropleth-map{height:520px;overflow:hidden}
      #choropleth-map svg{width:100%!important;height:100%!important;max-width:none!important;max-height:none!important}
      .chart-subsection{margin:22px 0}
      html{scroll-behavior:smooth}
    </style>
  </head>

  <body>
    <div class="topnav">
      <a href="index.html">Home</a>
      <a class="active" href="visualizations.html">Visualizations</a>
    </div>

    <div class="header">
      <h1>Data Visualizations</h1>
      <p>Exploring Conflict Data Through Interactive Charts</p>
    </div>

    <nav class="page-index" aria-label="On this page">
      <div class="container">
        <a href="#section-comparisons">Section 1 — Comparisons</a>
        <a href="#section-distributions">Section 2 — Distributions</a>
        <a href="#section-timeperiods">Section 3 — Time periods</a>
      </div>
    </nav>

    <div class="introduction">
      <h2>Interactive Data Exploration</h2>
      <p>This page presents a comprehensive set of visualizations examining conflict and human suffering data. Use the interactive features to explore the data in detail.</p>

      <details id="section-comparisons" class="section" open>
        <summary>
          <h2>Section 1 — Comparisons</h2>
          <p class="section-subtitle">Comparing categories across countries, years, and regions</p>
        </summary>
        <div class="section-body">
          <section id="bar-chart-section" class="chart-section">
            <h3>Top Countries by Total Fatalities</h3>
            <p>Top 10 countries with the highest total reported fatalities across all years.</p>
            <div id="bar-chart" class="chart-container" style="height:420px"></div>
          </section>

          <section id="grouped-bar-chart-section" class="chart-section">
            <h3>Civilian vs Combatant Fatalities by Year</h3>
            <p>Civilian and combatant fatalities from 2018 to 2024.</p>
            <div id="grouped-bar-chart" class="chart-container" style="height:420px"></div>
          </section>

          <section id="heatmap-section" class="chart-section">
            <h3>Events Targeting Civilians by Region and Year</h3>
            <p>Intensity of events targeting civilians by region and year.</p>
            <div id="heatmap" class="chart-container" style="height:520px"></div>
          </section>

          <section id="stacked-bar-section" class="chart-section">
            <h3>Event Types by Region</h3>
            <p>Proportional breakdown of different event types by region.</p>
            <div id="stacked-bar-chart" class="chart-container" style="height:420px"></div>
          </section>

          <section id="waffle-section" class="chart-section">
            <h3>Event Types</h3>
            <p>Most recorded political events are demonstrations rather than direct attacks on civilians.</p>
            <div id="waffle-chart" class="chart-container" style="height:420px"></div>
          </section>
        </div>
      </details>

      <details id="section-distributions" class="section">
        <summary>
          <h2>Section 2 — Distributions</h2>
          <p class="section-subtitle">How values spread: histograms, violin/ridgeline, and boxplots</p>
        </summary>
        <div class="section-body">
          <section id="histogram-subsection" class="chart-section">
            <h3>Histogram of Fatalities</h3>
            <p>Distribution of events involving fatalities grouped by year.</p>
            <div id="histogram-chart" class="chart-container" style="height:380px"></div>
          </section>

        <section id="violin-subsection" class="chart-section">
          <h3>Yearly fatalities in Africa and Middle East & Asia.</h3>
          <p>Ridgeline chart of the yearly fatality count for the specified regions</p>
          <div id="violin-plot" class="chart-container" style="height:480px"></div>
        </section>


          <section id="boxplot-subsection" class="chart-section">
            <h3>Boxplot of Fatalities by Year</h3>
            <p>A different view of the yearly fatality count.</p>
            <div id="box-plot" class="chart-container" style="height:380px"></div>
          </section>
        </div>
      </details>
    </div>

    <!--SECTION THREE - TIME EVOLUTION-->
    <details id="section-timeperiods" class="section">
        <summary>
          <h2>Section 3 — Time periods</h2>
          <p class="section-subtitle">How values evolve with time</p>
        </summary>
        <div class="section-body">
          <section id="linear-subsection" class="chart-section">
            <h3>Regional Fatalities Over Time</h3>
            <p>Compare the yearly reported fatalities for Africa and the Middle East &amp; Asia to spot diverging trends.</p>
            <div id="linear-chart" class="chart-container" style="height:420px"></div>
          </section>

          <section id="area-subsection" class="chart-section">
            <h3>Event Types Over Time</h3>
            <p>Stacked area chart showing how demonstration events versus events targeting civilians evolved from 2018 onward.</p>
            <div id="area-chart" class="chart-container" style="height:420px"></div>
          </section>

          <section id="monthly-subsection" class="chart-section">
            <h3>Monthly Political Violence Events</h3>
            <p>Top countries with the highest volumes of political violence events by month, highlighting peaks and seasonality.</p>
            <div id="monthly-lines" class="chart-container" style="height:440px"></div>
          </section>
        </div>
      </details>
    </div>

    <footer class="footer">
      <p>&copy; <span id="footer-year"></span> Vizionaries</p>
    </footer>

    <script>
      document.getElementById("footer-year").textContent = new Date().getFullYear();

      const links=[...document.querySelectorAll(".page-index a")];
      const targets=links.map(a=>document.querySelector(a.getAttribute("href")));

      // set initial active on load
      (function setInitialActive(){
        links.forEach(l=>l.classList.remove("active-link"));
        const idx = targets.findIndex(el => el && el.getBoundingClientRect().top >= 0);
        (idx >= 0 ? links[idx] : links[0]).classList.add("active-link");
      })();

      const obs=new IntersectionObserver(entries=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            links.forEach(l=>l.classList.remove("active-link"));
            const i=targets.indexOf(e.target);
            if(i>=0) links[i].classList.add("active-link");
          }
        });
      },{rootMargin:"-50% 0px -40% 0px",threshold:[0,1]});

      targets.forEach(t=>t&&obs.observe(t));

      document.querySelectorAll('.page-index a[href^="#"]').forEach(a=>{
        a.addEventListener("click",()=>{
          const id=a.getAttribute("href").slice(1);
          const t=document.getElementById(id);
          if(!t) return;
          const host=t.closest("details.section");
          if(host && !host.open) host.open=true;
        });
      });
    </script>

    <script src="visualizations.js"></script>
  </body>
</html>
